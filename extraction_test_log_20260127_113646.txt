2026-01-27 11:36:46,909 - INFO - Iniciando teste em: 11.2025_NOVEMBRO_1.547
2026-01-27 11:36:46,909 - INFO - Limite de arquivos: 10
2026-01-27 11:36:46,910 - INFO - Saída JSON: extraction_test_results.json
2026-01-27 11:36:47,742 - INFO - PyTorch configured: CPU-only, threads=4, grad=disabled
2026-01-27 11:36:47,883 - INFO - Loaded patterns from extraction_patterns.yaml
2026-01-27 11:36:47,889 - INFO - Loaded 277 unique suppliers from 1273 files.
2026-01-27 11:36:47,895 - INFO - pyzbar available for barcode decoding
2026-01-27 11:36:47,912 - INFO - 
######################################################################
2026-01-27 11:36:47,912 - INFO - # TESTE COMPLETO DE EXTRAÇÃO SRDA-Rural
2026-01-27 11:36:47,913 - INFO - # Pasta: 11.2025_NOVEMBRO_1.547
2026-01-27 11:36:47,913 - INFO - # Total de arquivos: 10
2026-01-27 11:36:47,913 - INFO - # Início: 2026-01-27T11:36:47.913031
2026-01-27 11:36:47,913 - INFO - ######################################################################

2026-01-27 11:36:47,913 - INFO - 
[1/10] Processando: 01.11.2025_MV_CADORE BIDOIA_3.108,00_BOLETO_FECHAMENTO.pdf
2026-01-27 11:36:47,913 - INFO - 
============================================================
2026-01-27 11:36:47,913 - INFO - TESTANDO: 01.11.2025_MV_CADORE BIDOIA_3.108,00_BOLETO_FECHAMENTO.pdf
2026-01-27 11:36:47,913 - INFO - ============================================================
2026-01-27 11:36:47,913 - INFO - Parseando nome do arquivo...
2026-01-27 11:36:47,913 - DEBUG - Parsed '01.11.2025_MV_CADORE BIDOIA_3.108,00_BOLETO_FECHAMENTO.pdf':
2026-01-27 11:36:47,913 - DEBUG -   Data: 01.11.2025
2026-01-27 11:36:47,913 - DEBUG -   Entidade: MV
2026-01-27 11:36:47,913 - DEBUG -   Fornecedor: CADORE BIDOIA
2026-01-27 11:36:47,913 - DEBUG -   Valor: 3.108,00 (310800 cents)
2026-01-27 11:36:47,913 - DEBUG -   Tipo: BOLETO
2026-01-27 11:36:47,913 - DEBUG -   Número: FECHAMENTO
2026-01-27 11:36:47,914 - DEBUG -   Parcela: None
2026-01-27 11:36:47,914 - INFO - Extraindo dados do documento...
2026-01-27 11:36:47,915 - DEBUG - DPI Normalization: 595x842 -> 612x866 (scale=1.029)
2026-01-27 11:36:47,918 - DEBUG - PDF carregado: 347 blocos de texto
2026-01-27 11:36:47,946 - DEBUG - Extracted '01.11.2025_MV_CADORE BIDOIA_3.108,00_BOLETO_FECHAMENTO.pdf':
2026-01-27 11:36:47,946 - DEBUG -   Valor: 310800 cents
2026-01-27 11:36:47,946 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:36:47,946 - DEBUG -   Fornecedor: CADORE BIDOIA
2026-01-27 11:36:47,946 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:36:47,946 - DEBUG -   Confiança: 1.00
2026-01-27 11:36:47,946 - INFO - Comparando resultados...
2026-01-27 11:36:47,946 - INFO - OK Valor: Match exato: 3108.00
2026-01-27 11:36:47,946 - INFO - OK Entidade: Match: MV
2026-01-27 11:36:47,946 - INFO - OK Fornecedor: Match exato
2026-01-27 11:36:47,946 - WARNING - WARN Tipo: Diferente: esperado=BOLETO, extraído=DocumentType.UNKNOWN
2026-01-27 11:36:47,946 - INFO - 
RESULTADO: ✓ PASSOU
2026-01-27 11:36:47,946 - INFO - Tempo: 33ms
2026-01-27 11:36:47,946 - INFO - 
[2/10] Processando: 01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf
2026-01-27 11:36:47,946 - INFO - 
============================================================
2026-01-27 11:36:47,946 - INFO - TESTANDO: 01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf
2026-01-27 11:36:47,946 - INFO - ============================================================
2026-01-27 11:36:47,946 - INFO - Parseando nome do arquivo...
2026-01-27 11:36:47,946 - DEBUG - Parsed '01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf':
2026-01-27 11:36:47,946 - DEBUG -   Data: 01.11.2025
2026-01-27 11:36:47,946 - DEBUG -   Entidade: MV
2026-01-27 11:36:47,947 - DEBUG -   Fornecedor: CADORE BIDOIA
2026-01-27 11:36:47,947 - DEBUG -   Valor: 850,00 (85000 cents)
2026-01-27 11:36:47,947 - DEBUG -   Tipo: NFE
2026-01-27 11:36:47,947 - DEBUG -   Número: 732177
2026-01-27 11:36:47,947 - DEBUG -   Parcela: None
2026-01-27 11:36:47,947 - INFO - Extraindo dados do documento...
2026-01-27 11:36:47,947 - DEBUG - DPI Normalization: 595x842 -> 612x865 (scale=1.028)
2026-01-27 11:36:47,951 - DEBUG - PDF carregado: 642 blocos de texto
2026-01-27 11:36:48,064 - WARNING - Failed to load PaddleOCR: Descriptors cannot be created directly.
If this call came from a _pb2.py file, your generated code is out of date and must be regenerated with protoc >= 3.19.0.
If you cannot immediately regenerate your protos, some other possible workarounds are:
 1. Downgrade the protobuf package to 3.20.x or lower.
 2. Set PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python (but this will use pure-Python parsing and will be much slower).

More information: https://developers.google.com/protocol-buffers/docs/news/2022-05-06#python-updates
2026-01-27 11:36:48,065 - INFO - Acionando VLM (Heavy Path) para 01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf
2026-01-27 11:36:48,065 - INFO - Loading Florence-2 (microsoft/Florence-2-base) on CPU...
2026-01-27 11:36:48,272 - DEBUG - Starting new HTTPS connection (1): huggingface.co:443
2026-01-27 11:36:49,424 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:36:49,666 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:36:49,870 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:36:50,057 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:36:50,226 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:36:50,426 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processing_florence2.py HTTP/1.1" 307 0
2026-01-27 11:36:50,601 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/processing_florence2.py HTTP/1.1" 200 0
2026-01-27 11:36:50,792 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:36:50,951 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:36:51,157 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/tokenizer_config.json HTTP/1.1" 307 0
2026-01-27 11:36:51,359 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/tokenizer_config.json HTTP/1.1" 200 0
2026-01-27 11:36:51,542 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/main/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:36:51,702 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/5ca5edf5bd017b9919c05d08aebef5e4c7ac3bac/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:36:52,132 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:36:52,431 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/config.json HTTP/1.1" 307 0
2026-01-27 11:36:52,606 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/config.json HTTP/1.1" 200 0
2026-01-27 11:36:52,796 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:36:52,971 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:36:53,296 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/modeling_florence2.py HTTP/1.1" 307 0
2026-01-27 11:36:53,471 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/modeling_florence2.py HTTP/1.1" 200 0
2026-01-27 11:36:54,255 - DEBUG - Starting new HTTPS connection (1): huggingface.co:443
2026-01-27 11:36:54,927 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/model.safetensors HTTP/1.1" 404 0
2026-01-27 11:36:55,574 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/generation_config.json HTTP/1.1" 404 0
2026-01-27 11:36:55,580 - INFO - Florence-2 loaded successfully (CPU, float32)
2026-01-27 11:36:55,591 - DEBUG - Resizing image from 894x1263 to 724x1024
2026-01-27 11:37:08,864 - INFO - PyTorch configured: threads=4, grad=False
2026-01-27 11:37:08,864 - INFO - ResourceManager initialized: max RAM = 6.5GB
2026-01-27 11:37:08,864 - INFO - Forcing memory cleanup...
2026-01-27 11:37:09,073 - DEBUG - Memory [After cleanup]: 1.59GB used, 15.69GB available
2026-01-27 11:37:09,073 - INFO - Florence-2 unloaded
2026-01-27 11:37:09,074 - DEBUG - Extracted '01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf':
2026-01-27 11:37:09,074 - DEBUG -   Valor: 0 cents
2026-01-27 11:37:09,074 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:37:09,074 - DEBUG -   Fornecedor: CADORE BIDOIA
2026-01-27 11:37:09,074 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:09,074 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:09,074 - INFO - Comparando resultados...
2026-01-27 11:37:09,074 - ERROR - FALHA Valor: Fora da tolerância: esperado=850.00, extraído=0.00, diff=850.00
2026-01-27 11:37:09,074 - INFO - OK Entidade: Match: MV
2026-01-27 11:37:09,074 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:09,074 - WARNING - WARN Tipo: Diferente: esperado=NFE, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:09,074 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:37:09,074 - INFO - Tempo: 21127ms
2026-01-27 11:37:09,074 - INFO - 
[3/10] Processando: 01.11.2025_MV_SANTA CLARA_270,00_BOLETO_111534.PDF
2026-01-27 11:37:09,074 - INFO - 
============================================================
2026-01-27 11:37:09,074 - INFO - TESTANDO: 01.11.2025_MV_SANTA CLARA_270,00_BOLETO_111534.PDF
2026-01-27 11:37:09,074 - INFO - ============================================================
2026-01-27 11:37:09,074 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:09,074 - DEBUG - Parsed '01.11.2025_MV_SANTA CLARA_270,00_BOLETO_111534.PDF':
2026-01-27 11:37:09,074 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:09,074 - DEBUG -   Entidade: MV
2026-01-27 11:37:09,074 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:09,074 - DEBUG -   Valor: 270,00 (27000 cents)
2026-01-27 11:37:09,074 - DEBUG -   Tipo: BOLETO
2026-01-27 11:37:09,074 - DEBUG -   Número: 111534
2026-01-27 11:37:09,074 - DEBUG -   Parcela: None
2026-01-27 11:37:09,075 - INFO - Extraindo dados do documento...
2026-01-27 11:37:09,075 - DEBUG - DPI Normalization: 595x841 -> 612x865 (scale=1.029)
2026-01-27 11:37:09,078 - DEBUG - PDF carregado: 250 blocos de texto
2026-01-27 11:37:09,095 - DEBUG - Extracted '01.11.2025_MV_SANTA CLARA_270,00_BOLETO_111534.PDF':
2026-01-27 11:37:09,095 - DEBUG -   Valor: 27000 cents
2026-01-27 11:37:09,095 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:37:09,095 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:09,095 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:09,095 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:09,095 - INFO - Comparando resultados...
2026-01-27 11:37:09,095 - INFO - OK Valor: Match exato: 270.00
2026-01-27 11:37:09,095 - INFO - OK Entidade: Match: MV
2026-01-27 11:37:09,095 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:09,095 - WARNING - WARN Tipo: Diferente: esperado=BOLETO, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:09,095 - INFO - 
RESULTADO: ✓ PASSOU
2026-01-27 11:37:09,095 - INFO - Tempo: 20ms
2026-01-27 11:37:09,095 - INFO - 
[4/10] Processando: 01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf
2026-01-27 11:37:09,095 - INFO - 
============================================================
2026-01-27 11:37:09,095 - INFO - TESTANDO: 01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf
2026-01-27 11:37:09,095 - INFO - ============================================================
2026-01-27 11:37:09,095 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:09,095 - DEBUG - Parsed '01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf':
2026-01-27 11:37:09,095 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:09,095 - DEBUG -   Entidade: MV
2026-01-27 11:37:09,095 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:09,095 - DEBUG -   Valor: 270,00 (27000 cents)
2026-01-27 11:37:09,095 - DEBUG -   Tipo: NFE
2026-01-27 11:37:09,095 - DEBUG -   Número: 111534
2026-01-27 11:37:09,095 - DEBUG -   Parcela: None
2026-01-27 11:37:09,095 - INFO - Extraindo dados do documento...
2026-01-27 11:37:09,096 - DEBUG - DPI Normalization: 596x842 -> 612x866 (scale=1.028)
2026-01-27 11:37:09,098 - DEBUG - PDF carregado: 442 blocos de texto
2026-01-27 11:37:09,140 - WARNING - Failed to load PaddleOCR: Descriptors cannot be created directly.
If this call came from a _pb2.py file, your generated code is out of date and must be regenerated with protoc >= 3.19.0.
If you cannot immediately regenerate your protos, some other possible workarounds are:
 1. Downgrade the protobuf package to 3.20.x or lower.
 2. Set PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python (but this will use pure-Python parsing and will be much slower).

More information: https://developers.google.com/protocol-buffers/docs/news/2022-05-06#python-updates
2026-01-27 11:37:09,140 - INFO - Acionando VLM (Heavy Path) para 01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf
2026-01-27 11:37:09,140 - INFO - Loading Florence-2 (microsoft/Florence-2-base) on CPU...
2026-01-27 11:37:09,327 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:09,516 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:09,675 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:09,858 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:10,016 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:10,200 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processing_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:10,360 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/processing_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:10,547 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:10,706 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:10,906 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/tokenizer_config.json HTTP/1.1" 307 0
2026-01-27 11:37:11,064 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/tokenizer_config.json HTTP/1.1" 200 0
2026-01-27 11:37:11,248 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/main/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:11,408 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/5ca5edf5bd017b9919c05d08aebef5e4c7ac3bac/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:11,646 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:11,962 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/config.json HTTP/1.1" 307 0
2026-01-27 11:37:12,124 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/config.json HTTP/1.1" 200 0
2026-01-27 11:37:12,307 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:12,467 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:12,657 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/modeling_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:12,817 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/modeling_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:12,827 - DEBUG - Starting new HTTPS connection (1): huggingface.co:443
2026-01-27 11:37:13,453 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/model.safetensors HTTP/1.1" 404 0
2026-01-27 11:37:14,073 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/generation_config.json HTTP/1.1" 404 0
2026-01-27 11:37:14,082 - INFO - Florence-2 loaded successfully (CPU, float32)
2026-01-27 11:37:14,091 - DEBUG - Resizing image from 894x1264 to 724x1024
2026-01-27 11:37:26,693 - INFO - Forcing memory cleanup...
2026-01-27 11:37:26,915 - DEBUG - Memory [After cleanup]: 1.73GB used, 15.56GB available
2026-01-27 11:37:26,916 - INFO - Florence-2 unloaded
2026-01-27 11:37:26,916 - DEBUG - Extracted '01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf':
2026-01-27 11:37:26,916 - DEBUG -   Valor: 0 cents
2026-01-27 11:37:26,916 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:37:26,916 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:26,916 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:26,916 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:26,916 - INFO - Comparando resultados...
2026-01-27 11:37:26,916 - ERROR - FALHA Valor: Fora da tolerância: esperado=270.00, extraído=0.00, diff=270.00
2026-01-27 11:37:26,916 - INFO - OK Entidade: Match: MV
2026-01-27 11:37:26,916 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:26,917 - WARNING - WARN Tipo: Diferente: esperado=NFE, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:26,917 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:37:26,917 - INFO - Tempo: 17821ms
2026-01-27 11:37:26,917 - INFO - 
[5/10] Processando: 01.11.2025_MV_SANTA CLARA_81,00_BOLETO_111535.PDF
2026-01-27 11:37:26,917 - INFO - 
============================================================
2026-01-27 11:37:26,917 - INFO - TESTANDO: 01.11.2025_MV_SANTA CLARA_81,00_BOLETO_111535.PDF
2026-01-27 11:37:26,917 - INFO - ============================================================
2026-01-27 11:37:26,917 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:26,917 - DEBUG - Parsed '01.11.2025_MV_SANTA CLARA_81,00_BOLETO_111535.PDF':
2026-01-27 11:37:26,917 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:26,917 - DEBUG -   Entidade: MV
2026-01-27 11:37:26,917 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:26,917 - DEBUG -   Valor: 81,00 (8100 cents)
2026-01-27 11:37:26,917 - DEBUG -   Tipo: BOLETO
2026-01-27 11:37:26,917 - DEBUG -   Número: 111535
2026-01-27 11:37:26,917 - DEBUG -   Parcela: None
2026-01-27 11:37:26,917 - INFO - Extraindo dados do documento...
2026-01-27 11:37:26,918 - DEBUG - DPI Normalization: 595x841 -> 612x865 (scale=1.029)
2026-01-27 11:37:26,920 - DEBUG - PDF carregado: 250 blocos de texto
2026-01-27 11:37:26,937 - DEBUG - Extracted '01.11.2025_MV_SANTA CLARA_81,00_BOLETO_111535.PDF':
2026-01-27 11:37:26,937 - DEBUG -   Valor: 8100 cents
2026-01-27 11:37:26,937 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:37:26,937 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:26,937 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:26,937 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:26,937 - INFO - Comparando resultados...
2026-01-27 11:37:26,937 - INFO - OK Valor: Match exato: 81.00
2026-01-27 11:37:26,937 - INFO - OK Entidade: Match: MV
2026-01-27 11:37:26,937 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:26,937 - WARNING - WARN Tipo: Diferente: esperado=BOLETO, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:26,937 - INFO - 
RESULTADO: ✓ PASSOU
2026-01-27 11:37:26,937 - INFO - Tempo: 20ms
2026-01-27 11:37:26,937 - INFO - 
[6/10] Processando: 01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf
2026-01-27 11:37:26,937 - INFO - 
============================================================
2026-01-27 11:37:26,937 - INFO - TESTANDO: 01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf
2026-01-27 11:37:26,937 - INFO - ============================================================
2026-01-27 11:37:26,938 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:26,938 - DEBUG - Parsed '01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf':
2026-01-27 11:37:26,938 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:26,938 - DEBUG -   Entidade: MV
2026-01-27 11:37:26,938 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:26,938 - DEBUG -   Valor: 81,00 (8100 cents)
2026-01-27 11:37:26,938 - DEBUG -   Tipo: NFE
2026-01-27 11:37:26,938 - DEBUG -   Número: 111535
2026-01-27 11:37:26,938 - DEBUG -   Parcela: None
2026-01-27 11:37:26,938 - INFO - Extraindo dados do documento...
2026-01-27 11:37:26,938 - DEBUG - DPI Normalization: 596x842 -> 612x866 (scale=1.028)
2026-01-27 11:37:26,940 - DEBUG - PDF carregado: 450 blocos de texto
2026-01-27 11:37:26,980 - WARNING - Failed to load PaddleOCR: Descriptors cannot be created directly.
If this call came from a _pb2.py file, your generated code is out of date and must be regenerated with protoc >= 3.19.0.
If you cannot immediately regenerate your protos, some other possible workarounds are:
 1. Downgrade the protobuf package to 3.20.x or lower.
 2. Set PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python (but this will use pure-Python parsing and will be much slower).

More information: https://developers.google.com/protocol-buffers/docs/news/2022-05-06#python-updates
2026-01-27 11:37:26,980 - INFO - Acionando VLM (Heavy Path) para 01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf
2026-01-27 11:37:26,981 - INFO - Loading Florence-2 (microsoft/Florence-2-base) on CPU...
2026-01-27 11:37:27,159 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:27,337 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:27,493 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:27,675 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:27,830 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:28,008 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processing_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:28,164 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/processing_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:28,346 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:28,502 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:28,691 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/tokenizer_config.json HTTP/1.1" 307 0
2026-01-27 11:37:28,847 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/tokenizer_config.json HTTP/1.1" 200 0
2026-01-27 11:37:29,027 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/main/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:29,182 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/5ca5edf5bd017b9919c05d08aebef5e4c7ac3bac/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:29,417 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:29,671 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/config.json HTTP/1.1" 307 0
2026-01-27 11:37:29,827 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/config.json HTTP/1.1" 200 0
2026-01-27 11:37:30,010 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:30,166 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:30,353 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/modeling_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:30,509 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/modeling_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:30,518 - DEBUG - Starting new HTTPS connection (1): huggingface.co:443
2026-01-27 11:37:31,297 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/model.safetensors HTTP/1.1" 404 0
2026-01-27 11:37:31,903 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/generation_config.json HTTP/1.1" 404 0
2026-01-27 11:37:31,912 - INFO - Florence-2 loaded successfully (CPU, float32)
2026-01-27 11:37:31,921 - DEBUG - Resizing image from 894x1264 to 724x1024
2026-01-27 11:37:44,580 - INFO - Forcing memory cleanup...
2026-01-27 11:37:44,788 - DEBUG - Memory [After cleanup]: 1.73GB used, 15.55GB available
2026-01-27 11:37:44,788 - INFO - Florence-2 unloaded
2026-01-27 11:37:44,788 - DEBUG - Extracted '01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf':
2026-01-27 11:37:44,788 - DEBUG -   Valor: 0 cents
2026-01-27 11:37:44,788 - DEBUG -   Entidade: EntityTag.MV
2026-01-27 11:37:44,788 - DEBUG -   Fornecedor: SANTA CLARA
2026-01-27 11:37:44,788 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:44,788 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:44,788 - INFO - Comparando resultados...
2026-01-27 11:37:44,788 - ERROR - FALHA Valor: Fora da tolerância: esperado=81.00, extraído=0.00, diff=81.00
2026-01-27 11:37:44,788 - INFO - OK Entidade: Match: MV
2026-01-27 11:37:44,788 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:44,788 - WARNING - WARN Tipo: Diferente: esperado=NFE, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:44,788 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:37:44,788 - INFO - Tempo: 17851ms
2026-01-27 11:37:44,788 - INFO - 
[7/10] Processando: 01.11.2025_VG_ABDALLA TRUCK_370,00_BOLETO_20590.pdf
2026-01-27 11:37:44,789 - INFO - 
============================================================
2026-01-27 11:37:44,789 - INFO - TESTANDO: 01.11.2025_VG_ABDALLA TRUCK_370,00_BOLETO_20590.pdf
2026-01-27 11:37:44,789 - INFO - ============================================================
2026-01-27 11:37:44,789 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:44,789 - DEBUG - Parsed '01.11.2025_VG_ABDALLA TRUCK_370,00_BOLETO_20590.pdf':
2026-01-27 11:37:44,789 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:44,789 - DEBUG -   Entidade: VG
2026-01-27 11:37:44,789 - DEBUG -   Fornecedor: ABDALLA TRUCK
2026-01-27 11:37:44,789 - DEBUG -   Valor: 370,00 (37000 cents)
2026-01-27 11:37:44,789 - DEBUG -   Tipo: BOLETO
2026-01-27 11:37:44,789 - DEBUG -   Número: 20590
2026-01-27 11:37:44,789 - DEBUG -   Parcela: None
2026-01-27 11:37:44,789 - INFO - Extraindo dados do documento...
2026-01-27 11:37:44,789 - DEBUG - DPI Normalization: 595x842 -> 612x866 (scale=1.029)
2026-01-27 11:37:44,794 - DEBUG - PDF carregado: 247 blocos de texto
2026-01-27 11:37:44,812 - DEBUG - Extracted '01.11.2025_VG_ABDALLA TRUCK_370,00_BOLETO_20590.pdf':
2026-01-27 11:37:44,812 - DEBUG -   Valor: 37000 cents
2026-01-27 11:37:44,812 - DEBUG -   Entidade: EntityTag.VG
2026-01-27 11:37:44,812 - DEBUG -   Fornecedor: ABDALLA TRUCK
2026-01-27 11:37:44,812 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:37:44,812 - DEBUG -   Confiança: 1.00
2026-01-27 11:37:44,812 - INFO - Comparando resultados...
2026-01-27 11:37:44,812 - INFO - OK Valor: Match exato: 370.00
2026-01-27 11:37:44,812 - INFO - OK Entidade: Match: VG
2026-01-27 11:37:44,812 - INFO - OK Fornecedor: Match exato
2026-01-27 11:37:44,812 - WARNING - WARN Tipo: Diferente: esperado=BOLETO, extraído=DocumentType.UNKNOWN
2026-01-27 11:37:44,812 - INFO - 
RESULTADO: ✓ PASSOU
2026-01-27 11:37:44,812 - INFO - Tempo: 23ms
2026-01-27 11:37:44,812 - INFO - 
[8/10] Processando: 01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf
2026-01-27 11:37:44,812 - INFO - 
============================================================
2026-01-27 11:37:44,812 - INFO - TESTANDO: 01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf
2026-01-27 11:37:44,812 - INFO - ============================================================
2026-01-27 11:37:44,812 - INFO - Parseando nome do arquivo...
2026-01-27 11:37:44,812 - DEBUG - Parsed '01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf':
2026-01-27 11:37:44,812 - DEBUG -   Data: 01.11.2025
2026-01-27 11:37:44,812 - DEBUG -   Entidade: VG
2026-01-27 11:37:44,812 - DEBUG -   Fornecedor: ABDALLA TRUCK
2026-01-27 11:37:44,812 - DEBUG -   Valor: 370,00 (37000 cents)
2026-01-27 11:37:44,812 - DEBUG -   Tipo: NFSE
2026-01-27 11:37:44,812 - DEBUG -   Número: 20590
2026-01-27 11:37:44,812 - DEBUG -   Parcela: None
2026-01-27 11:37:44,812 - INFO - Extraindo dados do documento...
2026-01-27 11:37:44,813 - DEBUG - DPI Normalization: 595x842 -> 612x866 (scale=1.029)
2026-01-27 11:37:44,830 - DEBUG - PDF carregado: 496 blocos de texto
2026-01-27 11:37:44,834 - DEBUG - Nenhuma âncora encontrada para 'due_date'
2026-01-27 11:37:44,837 - DEBUG - Nenhuma âncora encontrada para 'emission_date'
2026-01-27 11:37:44,844 - DEBUG - Nenhuma âncora encontrada para 'amount'
2026-01-27 11:37:44,847 - DEBUG - Nenhuma âncora encontrada para 'cnpj_emissor'
2026-01-27 11:37:44,849 - DEBUG - Nenhuma âncora encontrada para 'cnpj_destinatario'
2026-01-27 11:37:44,883 - WARNING - Failed to load PaddleOCR: Descriptors cannot be created directly.
If this call came from a _pb2.py file, your generated code is out of date and must be regenerated with protoc >= 3.19.0.
If you cannot immediately regenerate your protos, some other possible workarounds are:
 1. Downgrade the protobuf package to 3.20.x or lower.
 2. Set PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python (but this will use pure-Python parsing and will be much slower).

More information: https://developers.google.com/protocol-buffers/docs/news/2022-05-06#python-updates
2026-01-27 11:37:44,883 - INFO - Acionando VLM (Heavy Path) para 01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf
2026-01-27 11:37:44,883 - INFO - Loading Florence-2 (microsoft/Florence-2-base) on CPU...
2026-01-27 11:37:45,063 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:45,242 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:45,397 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:45,578 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:45,734 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:45,955 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processing_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:46,110 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/processing_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:46,332 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/preprocessor_config.json HTTP/1.1" 307 0
2026-01-27 11:37:46,488 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/preprocessor_config.json HTTP/1.1" 200 0
2026-01-27 11:37:46,890 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/tokenizer_config.json HTTP/1.1" 307 0
2026-01-27 11:37:47,046 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/tokenizer_config.json HTTP/1.1" 200 0
2026-01-27 11:37:47,225 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/main/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:47,382 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/5ca5edf5bd017b9919c05d08aebef5e4c7ac3bac/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:47,617 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/processor_config.json HTTP/1.1" 404 0
2026-01-27 11:37:47,864 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/config.json HTTP/1.1" 307 0
2026-01-27 11:37:48,021 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/config.json HTTP/1.1" 200 0
2026-01-27 11:37:48,201 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/configuration_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:48,357 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/configuration_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:48,543 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/modeling_florence2.py HTTP/1.1" 307 0
2026-01-27 11:37:48,700 - DEBUG - https://huggingface.co:443 "HEAD /api/resolve-cache/models/microsoft/Florence-2-base/75e922a51facc3440dcb168ac029d19a55ee16ab/modeling_florence2.py HTTP/1.1" 200 0
2026-01-27 11:37:48,709 - DEBUG - Starting new HTTPS connection (1): huggingface.co:443
2026-01-27 11:37:49,486 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/model.safetensors HTTP/1.1" 404 0
2026-01-27 11:37:50,083 - DEBUG - https://huggingface.co:443 "HEAD /microsoft/Florence-2-base/resolve/refs%2Fpr%2F6/generation_config.json HTTP/1.1" 404 0
2026-01-27 11:37:50,092 - INFO - Florence-2 loaded successfully (CPU, float32)
2026-01-27 11:37:50,123 - DEBUG - Resizing image from 893x1263 to 724x1024
2026-01-27 11:38:02,664 - INFO - Forcing memory cleanup...
2026-01-27 11:38:02,893 - DEBUG - Memory [After cleanup]: 1.73GB used, 15.57GB available
2026-01-27 11:38:02,893 - INFO - Florence-2 unloaded
2026-01-27 11:38:02,893 - DEBUG - Extracted '01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf':
2026-01-27 11:38:02,894 - DEBUG -   Valor: 0 cents
2026-01-27 11:38:02,894 - DEBUG -   Entidade: EntityTag.VG
2026-01-27 11:38:02,894 - DEBUG -   Fornecedor: ABDALLA TRUCK
2026-01-27 11:38:02,894 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:38:02,894 - DEBUG -   Confiança: 1.00
2026-01-27 11:38:02,894 - INFO - Comparando resultados...
2026-01-27 11:38:02,894 - ERROR - FALHA Valor: Fora da tolerância: esperado=370.00, extraído=0.00, diff=370.00
2026-01-27 11:38:02,894 - INFO - OK Entidade: Match: VG
2026-01-27 11:38:02,894 - INFO - OK Fornecedor: Match exato
2026-01-27 11:38:02,894 - WARNING - WARN Tipo: Diferente: esperado=NFSE, extraído=DocumentType.UNKNOWN
2026-01-27 11:38:02,894 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:38:02,894 - INFO - Tempo: 18081ms
2026-01-27 11:38:02,894 - INFO - 
[9/10] Processando: 01.11.2025_VG_AGRO BAGGIO_2.843,29_5.686,58_PARC 2-2_NFE_414978.pdf
2026-01-27 11:38:02,894 - INFO - 
============================================================
2026-01-27 11:38:02,894 - INFO - TESTANDO: 01.11.2025_VG_AGRO BAGGIO_2.843,29_5.686,58_PARC 2-2_NFE_414978.pdf
2026-01-27 11:38:02,894 - INFO - ============================================================
2026-01-27 11:38:02,894 - INFO - Parseando nome do arquivo...
2026-01-27 11:38:02,894 - DEBUG - Parsed '01.11.2025_VG_AGRO BAGGIO_2.843,29_5.686,58_PARC 2-2_NFE_414978.pdf':
2026-01-27 11:38:02,894 - DEBUG -   Data: 01.11.2025
2026-01-27 11:38:02,894 - DEBUG -   Entidade: VG
2026-01-27 11:38:02,894 - DEBUG -   Fornecedor: AGRO BAGGIO
2026-01-27 11:38:02,894 - DEBUG -   Valor: 2.843,29 (284329 cents)
2026-01-27 11:38:02,894 - DEBUG -   Tipo: NFE
2026-01-27 11:38:02,894 - DEBUG -   Número: 414978
2026-01-27 11:38:02,894 - DEBUG -   Parcela: 2-2
2026-01-27 11:38:02,894 - INFO - Extraindo dados do documento...
2026-01-27 11:38:02,895 - DEBUG - DPI Normalization: 595x842 -> 612x866 (scale=1.028)
2026-01-27 11:38:02,898 - DEBUG - PDF carregado: 529 blocos de texto
2026-01-27 11:38:02,904 - DEBUG - Nenhuma âncora encontrada para 'due_date'
2026-01-27 11:38:02,933 - DEBUG - Extracted '01.11.2025_VG_AGRO BAGGIO_2.843,29_5.686,58_PARC 2-2_NFE_414978.pdf':
2026-01-27 11:38:02,934 - DEBUG -   Valor: 431827 cents
2026-01-27 11:38:02,934 - DEBUG -   Entidade: EntityTag.VG
2026-01-27 11:38:02,934 - DEBUG -   Fornecedor: AGRO BAGGIO
2026-01-27 11:38:02,934 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:38:02,934 - DEBUG -   Confiança: 1.00
2026-01-27 11:38:02,934 - INFO - Comparando resultados...
2026-01-27 11:38:02,934 - ERROR - FALHA Valor: Fora da tolerância: esperado=2843.29, extraído=4318.27, diff=1474.98
2026-01-27 11:38:02,934 - INFO - OK Entidade: Match: VG
2026-01-27 11:38:02,934 - INFO - OK Fornecedor: Match exato
2026-01-27 11:38:02,934 - WARNING - WARN Tipo: Diferente: esperado=NFE, extraído=DocumentType.UNKNOWN
2026-01-27 11:38:02,934 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:38:02,934 - INFO - Tempo: 40ms
2026-01-27 11:38:02,934 - INFO - 
[10/10] Processando: 01.11.2025_VG_AGRO BAGGIO_2.843,29_PARC 2-2_BOLETO_414978.pdf
2026-01-27 11:38:02,934 - INFO - 
============================================================
2026-01-27 11:38:02,934 - INFO - TESTANDO: 01.11.2025_VG_AGRO BAGGIO_2.843,29_PARC 2-2_BOLETO_414978.pdf
2026-01-27 11:38:02,934 - INFO - ============================================================
2026-01-27 11:38:02,934 - INFO - Parseando nome do arquivo...
2026-01-27 11:38:02,934 - DEBUG - Parsed '01.11.2025_VG_AGRO BAGGIO_2.843,29_PARC 2-2_BOLETO_414978.pdf':
2026-01-27 11:38:02,934 - DEBUG -   Data: 01.11.2025
2026-01-27 11:38:02,934 - DEBUG -   Entidade: VG
2026-01-27 11:38:02,934 - DEBUG -   Fornecedor: AGRO BAGGIO
2026-01-27 11:38:02,934 - DEBUG -   Valor: 2.843,29 (284329 cents)
2026-01-27 11:38:02,934 - DEBUG -   Tipo: BOLETO
2026-01-27 11:38:02,934 - DEBUG -   Número: 414978
2026-01-27 11:38:02,934 - DEBUG -   Parcela: 2-2
2026-01-27 11:38:02,934 - INFO - Extraindo dados do documento...
2026-01-27 11:38:02,935 - DEBUG - DPI Normalization: 595x842 -> 612x866 (scale=1.028)
2026-01-27 11:38:02,937 - DEBUG - PDF carregado: 366 blocos de texto
2026-01-27 11:38:02,963 - DEBUG - Extracted '01.11.2025_VG_AGRO BAGGIO_2.843,29_PARC 2-2_BOLETO_414978.pdf':
2026-01-27 11:38:02,963 - DEBUG -   Valor: 10 cents
2026-01-27 11:38:02,963 - DEBUG -   Entidade: EntityTag.VG
2026-01-27 11:38:02,964 - DEBUG -   Fornecedor: AGRO BAGGIO
2026-01-27 11:38:02,964 - DEBUG -   Tipo: DocumentType.UNKNOWN
2026-01-27 11:38:02,964 - DEBUG -   Confiança: 1.00
2026-01-27 11:38:02,964 - INFO - Comparando resultados...
2026-01-27 11:38:02,964 - ERROR - FALHA Valor: Fora da tolerância: esperado=2843.29, extraído=0.10, diff=2843.19
2026-01-27 11:38:02,964 - INFO - OK Entidade: Match: VG
2026-01-27 11:38:02,964 - INFO - OK Fornecedor: Match exato
2026-01-27 11:38:02,964 - WARNING - WARN Tipo: Diferente: esperado=BOLETO, extraído=DocumentType.UNKNOWN
2026-01-27 11:38:02,964 - INFO - 
RESULTADO: ✗ FALHOU
2026-01-27 11:38:02,964 - INFO - Tempo: 29ms
2026-01-27 11:38:02,964 - INFO - 
######################################################################
2026-01-27 11:38:02,964 - INFO - # RESUMO DO TESTE
2026-01-27 11:38:02,964 - INFO - ######################################################################
2026-01-27 11:38:02,964 - INFO - 
TOTAL DE ARQUIVOS: 10
2026-01-27 11:38:02,964 - INFO -   ✓ Passou:  4 (40.0%)
2026-01-27 11:38:02,964 - INFO -   ✗ Falhou:  6 (60.0%)
2026-01-27 11:38:02,964 - INFO -   ⚠ Erros:   0
2026-01-27 11:38:02,964 - INFO - 
TEMPO DE EXECUÇÃO:
2026-01-27 11:38:02,964 - INFO -   Total:  75.1s
2026-01-27 11:38:02,964 - INFO -   Médio:  7504ms/arquivo
2026-01-27 11:38:02,964 - INFO - 
PRECISÃO POR CAMPO:
2026-01-27 11:38:02,964 - INFO -   amount         :  40.0% (4/10)
2026-01-27 11:38:02,964 - INFO -   doc_type       :   0.0% (0/10)
2026-01-27 11:38:02,964 - INFO -   entity         : 100.0% (10/10)
2026-01-27 11:38:02,964 - INFO -   supplier       : 100.0% (10/10)
2026-01-27 11:38:02,964 - INFO - 
PRECISÃO POR TIPO DE DOCUMENTO:
2026-01-27 11:38:02,964 - INFO -   BOLETO         :  80.0% (4/5)
2026-01-27 11:38:02,964 - INFO -   NFE            :   0.0% (0/4)
2026-01-27 11:38:02,964 - INFO -   NFSE           :   0.0% (0/1)
2026-01-27 11:38:02,964 - INFO - 
PRECISÃO POR ENTIDADE:
2026-01-27 11:38:02,964 - INFO -   MV             :  50.0% (3/6)
2026-01-27 11:38:02,964 - INFO -   VG             :  25.0% (1/4)
2026-01-27 11:38:02,964 - INFO - 
======================================================================
2026-01-27 11:38:02,964 - INFO - TOP 20 FALHAS (de 6 total)
2026-01-27 11:38:02,964 - INFO - ======================================================================
2026-01-27 11:38:02,964 - INFO - 
01.11.2025_MV_CADORE BIDOIA_850,00_NFE_732177.pdf
2026-01-27 11:38:02,964 - INFO -   Ground Truth: 850,00 (85000 cents) | MV | CADORE BIDOIA
2026-01-27 11:38:02,964 - INFO -   Extraído:     0 cents | EntityTag.MV | CADORE BIDOIA
2026-01-27 11:38:02,964 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=850.00, extraído=0.00, diff=850.00
2026-01-27 11:38:02,964 - INFO - 
01.11.2025_MV_SANTA CLARA_270,00_NFE_111534.pdf
2026-01-27 11:38:02,964 - INFO -   Ground Truth: 270,00 (27000 cents) | MV | SANTA CLARA
2026-01-27 11:38:02,964 - INFO -   Extraído:     0 cents | EntityTag.MV | SANTA CLARA
2026-01-27 11:38:02,964 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=270.00, extraído=0.00, diff=270.00
2026-01-27 11:38:02,964 - INFO - 
01.11.2025_MV_SANTA CLARA_81,00_NFE_111535.pdf
2026-01-27 11:38:02,964 - INFO -   Ground Truth: 81,00 (8100 cents) | MV | SANTA CLARA
2026-01-27 11:38:02,964 - INFO -   Extraído:     0 cents | EntityTag.MV | SANTA CLARA
2026-01-27 11:38:02,965 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=81.00, extraído=0.00, diff=81.00
2026-01-27 11:38:02,965 - INFO - 
01.11.2025_VG_ABDALLA TRUCK_370,00_NFSE_20590.pdf
2026-01-27 11:38:02,965 - INFO -   Ground Truth: 370,00 (37000 cents) | VG | ABDALLA TRUCK
2026-01-27 11:38:02,965 - INFO -   Extraído:     0 cents | EntityTag.VG | ABDALLA TRUCK
2026-01-27 11:38:02,965 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=370.00, extraído=0.00, diff=370.00
2026-01-27 11:38:02,965 - INFO - 
01.11.2025_VG_AGRO BAGGIO_2.843,29_5.686,58_PARC 2-2_NFE_414978.pdf
2026-01-27 11:38:02,965 - INFO -   Ground Truth: 2.843,29 (284329 cents) | VG | AGRO BAGGIO
2026-01-27 11:38:02,965 - INFO -   Extraído:     431827 cents | EntityTag.VG | AGRO BAGGIO
2026-01-27 11:38:02,965 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=2843.29, extraído=4318.27, diff=1474.98
2026-01-27 11:38:02,965 - INFO - 
01.11.2025_VG_AGRO BAGGIO_2.843,29_PARC 2-2_BOLETO_414978.pdf
2026-01-27 11:38:02,965 - INFO -   Ground Truth: 2.843,29 (284329 cents) | VG | AGRO BAGGIO
2026-01-27 11:38:02,965 - INFO -   Extraído:     10 cents | EntityTag.VG | AGRO BAGGIO
2026-01-27 11:38:02,965 - INFO -   ERRO: Valor incorreto: Fora da tolerância: esperado=2843.29, extraído=0.10, diff=2843.19
2026-01-27 11:38:02,966 - INFO - 
Resultados salvos em: extraction_test_results.json
2026-01-27 11:38:02,966 - INFO - Log salvo em: extraction_test_log_20260127_113646.txt
